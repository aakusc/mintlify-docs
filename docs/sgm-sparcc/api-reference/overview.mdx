---
title: API Reference Overview
description: REST API documentation for integrating with SGM.
---

# API Reference Overview

SGM provides a comprehensive REST API for integrating with external systems. This reference documents all available endpoints, authentication, and usage patterns.

## Base URL

```
http://localhost:3030/api
```

In production, replace with your deployed URL.

## API Architecture

SGM uses a **Contracts + Ports + Bindings** pattern:

| Layer | Purpose |
|-------|---------|
| **Contracts** | Zod schemas validate request/response |
| **Ports** | Service interfaces define behavior |
| **Bindings** | Implementations (synthetic, mapped, live) |

## Binding Modes

The `BINDING_MODE` environment variable determines data source:

| Mode | Data Source | Use Case |
|------|-------------|----------|
| `synthetic` | In-memory demo data | Development, testing |
| `mapped` | External API adapters | Integrations |
| `live` | Prisma database | Production |

## Authentication

Most endpoints require authentication. See [Authentication](/api-reference/authentication) for details.

```bash
# Get token
POST /api/auth/login
{
  "email": "user@example.com",
  "password": "password"
}

# Use token
GET /api/sgm/policies
Authorization: Bearer <token>
```

## API Sections

<CardGroup cols={2}>
  <Card title="Authentication" icon="key" href="/api-reference/authentication">
    Login, tokens, and session management
  </Card>
  <Card title="AskSGM" icon="robot" href="/api-reference/asksgm">
    AI-powered governance assistant
  </Card>
  <Card title="Policies" icon="file-contract" href="/api-reference/policies">
    Policy library management
  </Card>
  <Card title="Plans" icon="clipboard-list" href="/api-reference/plans">
    Compensation plan operations
  </Card>
  <Card title="Documents" icon="file" href="/api-reference/documents">
    Document upload and management
  </Card>
  <Card title="Admin" icon="users-gear" href="/api-reference/admin">
    User and tenant management
  </Card>
  <Card title="Client Dashboards" icon="chart-line" href="/api-reference/client-dashboards">
    Tenant-specific analytics
  </Card>
  <Card title="Audit" icon="clipboard-list" href="/api-reference/audit">
    Event logging and audit trails
  </Card>
</CardGroup>

## Common Patterns

### Request Headers

| Header | Required | Description |
|--------|----------|-------------|
| `Authorization` | Yes* | Bearer token for authentication |
| `Content-Type` | Yes | `application/json` for most endpoints |
| `X-Tenant-ID` | No | Tenant context (optional, usually from token) |

*Some endpoints (health, public) don't require auth.

### Query Parameters

Common query parameters for list endpoints:

| Parameter | Type | Description |
|-----------|------|-------------|
| `tenantId` | string | Filter by tenant |
| `search` | string | Full-text search |
| `status` | string | Filter by status |
| `skip` | number | Pagination offset |
| `limit` | number | Page size (default: 20) |

### Response Format

All responses follow this structure:

```json
{
  "data": [...],
  "meta": {
    "total": 42,
    "page": 1,
    "pageSize": 20
  }
}
```

Or for single items:

```json
{
  "data": {...},
  "dataType": "demo" | "live"
}
```

### Error Responses

| Status | Meaning | Response |
|--------|---------|----------|
| 400 | Bad Request | Validation error with details |
| 401 | Unauthorized | Missing or invalid token |
| 403 | Forbidden | Insufficient permissions |
| 404 | Not Found | Resource doesn't exist |
| 409 | Conflict | Duplicate or conflicting data |
| 429 | Too Many Requests | Rate limit exceeded |
| 500 | Server Error | Internal error |

Error response format:

```json
{
  "error": "Error message",
  "code": "ERROR_CODE",
  "details": {...}
}
```

## Rate Limiting

| Endpoint Type | Limit | Window |
|---------------|-------|--------|
| General API | 100 | Per minute |
| AI endpoints | 30 | Per minute |
| Admin endpoints | 50 | Per minute |

Rate limit headers in response:

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1706432400
```

## Pagination

List endpoints support pagination:

```bash
GET /api/sgm/policies?skip=20&limit=10
```

Response includes pagination metadata:

```json
{
  "data": [...],
  "meta": {
    "total": 100,
    "skip": 20,
    "limit": 10,
    "hasMore": true
  }
}
```

## OpenAPI Specification

Full OpenAPI 3.0 specification available at:

```
/api/openapi.yaml
```

Or see the [OpenAPI spec](/openapi.yaml) in this documentation.

## Health Check

Verify API is running:

```bash
GET /api/health
```

Response:
```json
{
  "status": "healthy",
  "version": "0.1.0",
  "timestamp": "2026-01-28T10:00:00Z"
}
```

## Code Examples

### cURL

```bash
# Get policies
curl -X GET "http://localhost:3030/api/sgm/policies" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

### JavaScript/TypeScript

```typescript
const response = await fetch('http://localhost:3030/api/sgm/policies', {
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  }
});
const data = await response.json();
```

### Python

```python
import requests

response = requests.get(
    'http://localhost:3030/api/sgm/policies',
    headers={
        'Authorization': f'Bearer {token}',
        'Content-Type': 'application/json'
    }
)
data = response.json()
```

## SDKs and Libraries

Currently, SGM provides REST API only. SDKs for popular languages are on the roadmap.

## Changelog

API changes are documented in release notes. Breaking changes are announced in advance.

| Version | Changes |
|---------|---------|
| 0.1.0 | Initial API release |

## Support

For API issues:
- Check error response for details
- Review rate limits
- Verify authentication
- Contact support with request ID
